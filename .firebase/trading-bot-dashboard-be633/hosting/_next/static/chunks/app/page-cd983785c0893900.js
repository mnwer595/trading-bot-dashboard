(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1057:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>d});var a=n(5155),l=n(2115),r=n(6874),t=n.n(r);let o="https://198.23.206.54",i="".concat(o,"/getsettings"),c="".concat(o,"/savesettings");function d(){let[e,s]=(0,l.useState)(null),[n,r]=(0,l.useState)(!0),[o,d]=(0,l.useState)(!1),[u,g]=(0,l.useState)(null),[m,b]=(0,l.useState)(null);(0,l.useEffect)(()=>{h()},[]);let h=async()=>{r(!0),g(null);try{console.log("Fetching settings from:",i);let e=await fetch(i,{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"});if(console.log("Response status:",e.status),console.log("Response headers:",e.headers),!e.ok){let s=await e.text();throw console.error("API Error:",s),Error("Failed to fetch settings: ".concat(e.status," ").concat(s))}let n=await e.json();console.log("Settings data:",n),s(n)}catch(e){console.error("Fetch error:",e),g(e.message||"Unknown error")}finally{r(!1)}},x=async e=>{d(!0),b(null),g(null);try{console.log("Saving settings to:",c);let s=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify(e)});if(console.log("Save response status:",s.status),!s.ok){let e=await s.text();throw console.error("Save API Error:",e),Error("Failed to save settings: ".concat(s.status," ").concat(e))}b("Settings saved successfully!"),setTimeout(()=>b(null),3e3)}catch(e){console.error("Save error:",e),g(e.message||"Failed to save settings")}finally{d(!1)}},f=async(n,a)=>{let l;if(e){if(n.includes(".")){let[s,r]=n.split(".");l={...e,[s]:{...e[s],[r]:a}}}else l={...e,[n]:a};s(l),await x(l)}},p=(n,a)=>{if(e)if(n.includes(".")){let[l,r]=n.split(".");s({...e,[l]:{...e[l],[r]:a}})}else s({...e,[n]:a})},j=async()=>{e&&await x(e)},v=e=>{let{checked:s,onChange:n,label:l}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("label",{className:"font-medium",children:[l,":"]}),(0,a.jsx)("button",{className:"w-12 h-6 rounded-full flex items-center transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(s?"bg-blue-600":"bg-zinc-300 dark:bg-zinc-700"),onClick:()=>n(!s),"aria-label":"Toggle ".concat(l),tabIndex:0,children:(0,a.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-white shadow transform transition-transform ".concat(s?"translate-x-6":"translate-x-1")})})]})};return(0,a.jsx)("div",{className:"min-h-screen bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100 flex flex-col items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Account Settings"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(t(),{href:"/experts",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500",children:"Manage Experts"}),(0,a.jsx)("button",{onClick:h,disabled:n,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50",children:n?"Loading...":"Refresh"})]})]}),n&&(0,a.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,a.jsx)("span",{className:"text-lg",children:"Loading..."})}),u&&(0,a.jsxs)("div",{className:"bg-red-100 text-red-700 p-4 rounded mb-4 text-center",children:["Error: ",u]}),m&&(0,a.jsx)("div",{className:"bg-green-100 text-green-700 p-4 rounded mb-4 text-center",children:m}),e&&(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:"Trading Settings"}),(0,a.jsx)(v,{checked:e.auto_trade,onChange:e=>f("auto_trade",e),label:"Auto Trade"}),(0,a.jsx)(v,{checked:e.channel_listener,onChange:e=>f("channel_listener",e),label:"Channel Listener"}),(0,a.jsx)(v,{checked:e.webhook_enabled,onChange:e=>f("webhook_enabled",e),label:"Webhook Enabled"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Risk Percentage:"}),(0,a.jsx)("input",{type:"number",value:e.risk_percentage,onChange:e=>p("risk_percentage",Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"100"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Lot Size:"}),(0,a.jsx)("input",{type:"number",value:e.lot_size,onChange:e=>p("lot_size",Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.01",min:"0.01"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:"Risk Management"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Default SL (pips):"}),(0,a.jsx)("input",{type:"number",value:e.default_sl_pips,onChange:e=>p("default_sl_pips",Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Risk/Reward Ratio:"}),(0,a.jsx)("input",{type:"number",value:e.risk_reward_ratio,onChange:e=>p("risk_reward_ratio",Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.1",min:"0.1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Trading Hours Start:"}),(0,a.jsx)("input",{type:"number",value:e.trading_hours.start,onChange:e=>p("trading_hours.start",Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"23"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-1",children:"Trading Hours End:"}),(0,a.jsx)("input",{type:"number",value:e.trading_hours.end,onChange:e=>p("trading_hours.end",Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"23"})]})]}),(0,a.jsxs)("div",{className:"space-y-4 md:col-span-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-purple-600 dark:text-purple-400",children:"Advanced Trading"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v,{checked:e.algo_trading.enabled,onChange:e=>f("algo_trading.enabled",e),label:"Algo Trading"}),e.algo_trading.enabled&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"Interval (minutes):"}),(0,a.jsx)("input",{type:"number",value:e.algo_trading.interval_minutes,onChange:e=>p("algo_trading.interval_minutes",Number(e.target.value)),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),(0,a.jsx)(v,{checked:e.hft_trading.enabled,onChange:e=>f("hft_trading.enabled",e),label:"HFT Trading"}),(0,a.jsx)(v,{checked:e.trade_secure.enabled,onChange:e=>f("trade_secure.enabled",e),label:"Trade Secure"})]})]})]}),(0,a.jsx)("div",{className:"mt-8 flex justify-center",children:(0,a.jsx)("button",{onClick:j,disabled:o,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Saving...":"Save Number Settings"})})]})]})})}},7920:(e,s,n)=>{Promise.resolve().then(n.bind(n,1057))}},e=>{e.O(0,[874,441,964,358],()=>e(e.s=7920)),_N_E=e.O()}]);